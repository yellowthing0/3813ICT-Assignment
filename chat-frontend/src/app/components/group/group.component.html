<div class="group-container">
  <h2>Welcome, {{ user?.username }}</h2>

  <div class="group-list">
    <div class="group-selection">
      <h3>Available Groups</h3>
      <ul>
        <li *ngFor="let group of availableGroups" (click)="selectGroup(group)" [class.selected]="group === selectedGroup">
          {{ group }}
        </li>
      </ul>
      <p *ngIf="!availableGroups.length">You have no available groups.</p>

      <!-- Create Group (Admin only) -->
      <div *ngIf="isAdmin">
        <input type="text" [(ngModel)]="newGroupName" placeholder="Group Name" />
        <button (click)="createGroup()">Create Group</button>
      </div>

      <!-- Delete Group Button (Admin only, visible when a group is selected) -->
      <div *ngIf="isAdmin && selectedGroup">
        <button (click)="deleteGroup()">Delete Group</button>
      </div>

      <!-- Display channels if a group is selected -->
      <div *ngIf="selectedGroup">
        <h3>Channels for {{ selectedGroup }}</h3>
        <ul>
          <li *ngFor="let channel of channels" (click)="selectChannel(channel)">
            {{ channel }}
          </li>
        </ul>
      </div>
    </div>

    <!-- Users panel on the right side -->
    <div class="users-panel" *ngIf="selectedGroup">
      <h3>Users in {{ selectedGroup }}</h3>
      <ul>
        <li *ngFor="let user of usersInGroup">
          {{ user }}
          <button *ngIf="isAdmin" (click)="removeUser(user)">Remove</button>
          <button *ngIf="isSuperAdmin" (click)="changeUserRole(user, 'promote')">Promote to Admin</button>
          <button *ngIf="isSuperAdmin" (click)="changeUserRole(user, 'demote')">Demote from Admin</button>
          <button *ngIf="isSuperAdmin" (click)="deleteUser(user)">Delete User</button>
        </li>
      </ul>

      <!-- Add User (Admin only) -->
      <div *ngIf="isAdmin">
        <input type="text" [(ngModel)]="newUsername" placeholder="Username" />
        <button (click)="inviteUser()">Add User</button>
      </div>

      <!-- Create User (Super Admin only) -->
      <div *ngIf="isSuperAdmin">
        <input type="text" [(ngModel)]="newUser.username" placeholder="Username" />
        <input type="password" [(ngModel)]="newUser.password" placeholder="Password" />
        <button (click)="createUser()">Create User</button>
      </div>
    </div>
  </div>

  <!-- Back button to go to the previous page -->
  <button (click)="goBack()">Go Back</button>
</div>
