<div class="group-container">
  <h2>Welcome, {{ user?.username }}</h2>

  <div class="group-list">
    <div class="group-selection">
      <h3>Available Groups</h3>
      <ul>
        <li *ngFor="let group of availableGroups" (click)="selectGroup(group)" [class.selected]="group === selectedGroup">
          {{ group }}
        </li>
      </ul>
      <p *ngIf="!availableGroups.length">You have no available groups.</p>

      <div *ngIf="selectedGroup">
        <h3>Channels for {{ selectedGroup }}</h3>
        <ul>
          <li *ngFor="let channel of channels" (click)="selectChannel(channel)">
            {{ channel }}
          </li>
        </ul>
      </div>
    </div>

    <div class="users-panel" *ngIf="selectedGroup">
      <h3>Users in {{ selectedGroup }}</h3>
      <ul>
        <li *ngFor="let user of usersInGroup">{{ user }}</li>
      </ul>

      <!-- Admin controls -->
      <div *ngIf="user?.roles?.includes('Admin')">
        <input type="text" [(ngModel)]="newUsername" placeholder="Username to add" />
        <button (click)="addUserToGroup()">Add User</button>

        <ul>
          <li *ngFor="let user of usersInGroup">
            {{ user }}
            <button (click)="removeUserFromGroup(user)">Remove User</button>
          </li>
        </ul>

        <button (click)="deleteGroup()">Delete Group</button>
      </div>
    </div>
  </div>

  <button (click)="goBack()">Go Back</button>
</div>
